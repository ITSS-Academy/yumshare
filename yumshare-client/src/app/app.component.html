<div class="app-container">
  <!-- Offline indicator - Temporarily disabled -->
  <!-- <app-offline-indicator></app-offline-indicator> -->

  <!-- PWA install prompt - Temporarily disabled -->
  <!-- <app-pwa-install></app-pwa-install> -->

  <!-- Sidebar -->
  <div class="sidebar-container" [class.sidebar-closed]="isClosed">
    <app-side-bar></app-side-bar>
  </div>

  <!-- Backdrop cho mobile -->
  @if (isMobile && !isClosed) {
    <div
      class="backdrop"
      (click)="closeSidebarOnBackdrop()">
    </div>
  }

  <!-- Main content -->
  <div class="main-content">
    <!-- Top nav -->
    <div class="navbar-container">
      <app-nav-bar (toggleSidebar)="toggleSidebar()"></app-nav-bar>
    </div>

    <!-- Router content -->
    <div class="content-container">
      <!-- Route loading indicator -->
      @if (routeLoadingService.isLoading()) {
        <app-loading
          [message]="'Loading page'"
          [showProgress]="true"
          [progressValue]="routeLoadingService.loadingProgress()">
        </app-loading>
      }

      <router-outlet></router-outlet>

      <!-- Footer - Hidden on message page -->
      @if (!isMessagePage()) {
        <app-footer></app-footer>
      }
    </div>
  </div>
</div>
